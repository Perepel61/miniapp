<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>–ó–∞–∫–∞–∑ —Å —Ñ–µ—Ä–º—ã</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    body {
      font-family: sans-serif;
      background-color: var(--tg-theme-bg-color, #fff);
      color: var(--tg-theme-text-color, #000);
      padding: 16px;
    }
    h2 { text-align: center; }
    .product {
      border: 1px solid #ccc;
      padding: 12px;
      margin-bottom: 12px;
      border-radius: 8px;
    }
    input, button, select {
      width: 100%;
      margin: 6px 0;
      padding: 8px;
      font-size: 16px;
    }
    .hidden { display: none; }
  </style>
</head>
<body>
  <h2>üê§ –ó–∞–∫–∞–∑ –ø—Ä–æ–¥—É–∫—Ü–∏–∏</h2>

  <div id="catalog">
    <div class="product">
      <strong>–ú—è—Å–æ –ø–µ—Ä–µ–ø–µ–ª–æ–≤</strong> ‚Äî 800 ‚ÇΩ/–∫–≥<br/>
      <input type="number" min="0" placeholder="–°–∫–æ–ª—å–∫–æ –∫–≥?" data-name="–ú—è—Å–æ –ø–µ—Ä–µ–ø–µ–ª–æ–≤" data-price="800" />
    </div>
    <div class="product">
      <strong>–Ø–π—Ü–æ –ø–µ—Ä–µ–ø–µ–ª–∏–Ω–æ–µ</strong> ‚Äî 120 ‚ÇΩ/–¥–µ—Å—è—Ç–æ–∫<br/>
      <input type="number" min="0" placeholder="–°–∫–æ–ª—å–∫–æ –¥–µ—Å—è—Ç–∫–æ–≤?" data-name="–Ø–π—Ü–æ –ø–µ—Ä–µ–ø–µ–ª–∏–Ω–æ–µ" data-price="120" />
    </div>
    <div class="product">
      <strong>–£–¥–æ–±—Ä–µ–Ω–∏–µ (–ø–æ–º—ë—Ç)</strong> ‚Äî 40 ‚ÇΩ/–∫–≥<br/>
      <input type="number" min="0" placeholder="–°–∫–æ–ª—å–∫–æ –∫–≥?" data-name="–£–¥–æ–±—Ä–µ–Ω–∏–µ" data-price="40" />
    </div>
  </div>

  <h3>üìù –í–∞—à–∏ –¥–∞–Ω–Ω—ã–µ</h3>
  <input id="name" type="text" placeholder="–í–∞—à–µ –∏–º—è" />
  <input id="phone" type="tel" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω" />
  <input id="address" type="text" placeholder="–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏" />

  <button onclick="sendOrder()">üì¶ –û—Ñ–æ—Ä–º–∏—Ç—å –∑–∞–∫–∞–∑</button>

  <script>
    function sendOrder() {
      const inputs = document.querySelectorAll("#catalog input");
      let order = [];
      let total = 0;

      inputs.forEach(input => {
        const qty = parseFloat(input.value);
        if (qty > 0) {
          const name = input.dataset.name;
          const price = parseFloat(input.dataset.price);
          order.push(`${name} ‚Äî ${qty} √ó ${price}‚ÇΩ = ${qty * price}‚ÇΩ`);
          total += qty * price;
        }
      });

      const name = document.getElementById("name").value.trim();
      const phone = document.getElementById("phone").value.trim();
      const address = document.getElementById("address").value.trim();

      if (!name || !phone || !address || order.length === 0) {
        alert("–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –≤—Å–µ –ø–æ–ª—è –∏ –≤—ã–±–µ—Ä–∏—Ç–µ —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω —Ç–æ–≤–∞—Ä.");
        return;
      }

      const message = `üõí –ù–æ–≤—ã–π –∑–∞–∫–∞–∑:\n\n` +
        order.join('\n') +
        `\n\nüí∞ –ò—Ç–æ–≥–æ: ${total}‚ÇΩ\nüë§ ${name}\nüìû ${phone}\nüìç ${address}`;

      if (window.Telegram && Telegram.WebApp) {
        Telegram.WebApp.sendData(message);
        Telegram.WebApp.close();
      } else {
        console.log(message); // –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏ –≤–Ω–µ Telegram
        alert("–ó–∞–∫–∞–∑ —Å—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω. –ü—Ä–æ–≤–µ—Ä—å –∫–æ–Ω—Å–æ–ª—å (F12).");
      }
    }
  </script>
</body>
</html>
